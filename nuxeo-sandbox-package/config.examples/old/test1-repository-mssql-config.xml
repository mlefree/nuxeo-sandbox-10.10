<?xml version="1.0"?>
<component name="repository-mssql-config">

    <require>datasources-mssql-config</require>

    <extension target="org.nuxeo.ecm.core.storage.sql.RepositoryService"
               point="repository">
        <repository name="mssql" label="mssql repo"
                    factory="org.nuxeo.ecm.core.storage.sql.ra.PoolingRepositoryFactory">
            <pool minPoolSize="0" maxPoolSize="20"
                  blockingTimeoutMillis="100"
                  idleTimeoutMinutes="10"
                  activeTimeoutMinutes="0"/>
            <clustering id="" enabled="false" delay="1000"/>
            <clusterInvalidatorClass>org.nuxeo.ecm.core.storage.sql.VCSPubSubInvalidator</clusterInvalidatorClass>
            <noDDL>false</noDDL>
            <ddlMode>execute</ddlMode>
            <aclOptimizations enabled="true"/>
            <pathOptimizations enabled="true"/>
            <idType>varchar</idType>
            <changeTokenEnabled>true</changeTokenEnabled>
            <indexing>
                <fulltext disabled="false" searchDisabled="false"
                          analyzer="english">
                    <index name="default">
                        <!-- all props implied -->
                    </index>
                    <!-- SQL Server does not support more than one fulltext index per
                    table: to add support for multiple fulltext index would required to
                    change the datamodel of VCS -->
                </fulltext>
            </indexing>
            <usersSeparator key=","/>
        </repository>
    </extension>

    <extension target="org.nuxeo.ecm.core.blob.BlobManager" point="configuration">
        <blobprovider name="mssql">
            <class>org.nuxeo.ecm.core.blob.binary.DefaultBinaryManager</class>
            <property name="path"></property>
            <property name="key"></property>
        </blobprovider>
    </extension>

</component>
